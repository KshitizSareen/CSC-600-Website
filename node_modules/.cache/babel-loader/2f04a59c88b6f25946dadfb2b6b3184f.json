{"ast":null,"code":"var _jsxFileName = \"/Users/kshitiz/CSC-600-Website/src/MainPage.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\n// 3rd party library imports\nimport React, { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport * as Tone from 'tone';\nimport { Music32 } from '@carbon/icons-react'; // project imports\n\nimport { InstrumentContainer } from './Instruments';\nimport { DispatchAction } from './Reducer';\nimport { SideNav } from './SideNav';\nimport { VisualizerContainer } from './Visualizers';\nimport { List } from 'immutable';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\n/** ------------------------------------------------------------------------ **\n * Instrument and visualizer component\n ** ------------------------------------------------------------------------ */\nfunction InstrumentPanel({\n  state,\n  dispatch\n}) {\n  /**\n   * This React component is the top-level for the instrument.\n   */\n  const instrument = state.get('instrument');\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: instrument && /*#__PURE__*/_jsxDEV(InstrumentContainer, {\n      state: state,\n      dispatch: dispatch,\n      instrument: instrument\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this);\n}\n\n_c = InstrumentPanel;\n\nfunction VisualizerPanel({\n  state\n}) {\n  /**\n   * This React component is the top-level for the visualizer.\n   */\n  const visualizer = state.get('visualizer');\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: visualizer && /*#__PURE__*/_jsxDEV(VisualizerContainer, {\n      visualizer: visualizer\n    }, visualizer.name, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n}\n\n_c2 = VisualizerPanel;\n\nfunction InstrumentAndVisualizer({\n  state,\n  dispatch\n}) {\n  /**\n   * This React component bundles the instrument panel and visualizer panel together.\n   */\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"absolute right-0 bottom-0 top-0 flex flex-column\",\n    style: {\n      left: '16rem'\n    },\n    children: [/*#__PURE__*/_jsxDEV(InstrumentPanel, {\n      state: state,\n      dispatch: dispatch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(VisualizerPanel, {\n      state: state,\n      dispatch: dispatch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n\n_c3 = InstrumentAndVisualizer;\n\nfunction ShowWelcome({\n  state,\n  dispatch\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"absolute right-0 bottom-0 top-0 flex flex-column items-center justify-center\",\n    style: {\n      left: '16rem'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mw6 lh-copy mb4\",\n      children: [/*#__PURE__*/_jsxDEV(Music32, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"f3 fw7 mb2\",\n        children: \"Welcome to the case study.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"f4 mb3\",\n        children: \"Select an instrument and a visualizer on the left to serve some fresh beats.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n\n_c4 = ShowWelcome;\n\nfunction ShowSongs({\n  state,\n  dispatch\n}) {\n  _s();\n\n  const oscillators = List(['sine', 'sawtooth', 'square', 'triangle', 'fmsine', 'fmsawtooth', 'fmtriangle', 'amsine', 'amsawtooth', 'amtriangle']);\n  const [synth, setSynth] = useState(new Tone.Synth({\n    oscillator: {\n      type: 'amsawtooth'\n    }\n  }).toDestination());\n  const [search, setSearch] = useState(\"\");\n  const notes = state.get('notes');\n  const songs = state.get('songs', List());\n  useEffect(() => {\n    if (search !== \"\") {\n      dispatch(new DispatchAction('SEARCH_SONGS', {\n        search,\n        songs\n      }));\n    }\n\n    if (notes && synth) {\n      let eachNote = notes.split(' ');\n      let noteObjs = eachNote.map((note, idx) => ({\n        idx,\n        time: `+${idx / 4}`,\n        note,\n        velocity: 1\n      }));\n      new Tone.Part((time, value) => {\n        // the value is an object which contains both the note and the velocity\n        synth.triggerAttackRelease(value.note, '4n', time, value.velocity);\n\n        if (value.idx === eachNote.length - 1) {\n          dispatch(new DispatchAction('STOP_SONG'));\n        }\n      }, noteObjs).start(0);\n      Tone.Transport.start();\n      return () => {\n        Tone.Transport.cancel();\n      };\n    }\n\n    return () => {};\n  }, [notes, synth, search, songs, dispatch]);\n\n  const setOscillator = newType => {\n    setSynth(oldSynth => {\n      oldSynth.disconnect();\n      return new Tone.Synth({\n        oscillator: {\n          type: newType\n        }\n      }).toDestination();\n    });\n  };\n\n  const FilteredSongs = state.get('FilteredSongs', List());\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      className: \"input-reset ba b--black-20 pa2 mb2 db w-100\",\n      placeholder: \"Enter Song Title\",\n      value: search,\n      onChange: value => {\n        setSearch(value.target.value);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'row',\n        justifyContent: 'space-between'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '5%'\n        },\n        children: [\"  Search Results by Song Tittle\", FilteredSongs !== undefined ? FilteredSongs.map(song => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"f6 pointer underline items-center no-underline i dim\",\n            onClick: () => {\n              dispatch(new DispatchAction('PLAY_SONG', {\n                id: song.get('id')\n              }));\n            },\n            children: song.get('songTitle')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 12\n          }, this);\n        }) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '5%'\n        },\n        children: [\"Oscillators List\", oscillators.map(o => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"f6 pointer underline items-center no-underline i dim\",\n          onClick: () => setOscillator(o),\n          style: {\n            margin: '1%'\n          },\n          children: o\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 1\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 166,\n    columnNumber: 5\n  }, this);\n}\n/** ------------------------------------------------------------------------ **\n * Main page component\n ** ------------------------------------------------------------------------ */\n\n\n_s(ShowSongs, \"UCXlfN6UOHgAJh0jnM2uOlkDZY8=\");\n\n_c5 = ShowSongs;\nexport function MainPage({\n  state,\n  dispatch\n}) {\n  _s2();\n\n  /**\n   * This React component bundles together the entire main page.\n   */\n  const location = useLocation();\n  const isWelcome = !state.get('instrument');\n  console.log('INSTRUMENT', isWelcome);\n  useEffect(() => {\n    dispatch(new DispatchAction('SET_LOCATION', {\n      location\n    }));\n  }, [dispatch, location]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed top-0 left-0 h-100 w-100 bg-white\",\n    onClick: () => Tone.start(),\n    children: [/*#__PURE__*/_jsxDEV(SideNav, {\n      state: state,\n      dispatch: dispatch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }, this), isWelcome ? /*#__PURE__*/_jsxDEV(ShowWelcome, {\n      state: state,\n      dispatch: dispatch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(InstrumentAndVisualizer, {\n      state: state,\n      dispatch: dispatch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 239,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(MainPage, \"BXcZrDMM76mmm4zA8/QV5UbMNXE=\", false, function () {\n  return [useLocation];\n});\n\n_c6 = MainPage;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"InstrumentPanel\");\n$RefreshReg$(_c2, \"VisualizerPanel\");\n$RefreshReg$(_c3, \"InstrumentAndVisualizer\");\n$RefreshReg$(_c4, \"ShowWelcome\");\n$RefreshReg$(_c5, \"ShowSongs\");\n$RefreshReg$(_c6, \"MainPage\");","map":{"version":3,"sources":["/Users/kshitiz/CSC-600-Website/src/MainPage.tsx"],"names":["React","useEffect","useState","useLocation","Tone","Music32","InstrumentContainer","DispatchAction","SideNav","VisualizerContainer","List","InstrumentPanel","state","dispatch","instrument","get","VisualizerPanel","visualizer","name","InstrumentAndVisualizer","left","ShowWelcome","ShowSongs","oscillators","synth","setSynth","Synth","oscillator","type","toDestination","search","setSearch","notes","songs","eachNote","split","noteObjs","map","note","idx","time","velocity","Part","value","triggerAttackRelease","length","start","Transport","cancel","setOscillator","newType","oldSynth","disconnect","FilteredSongs","target","display","flexDirection","justifyContent","marginTop","undefined","song","id","o","margin","MainPage","location","isWelcome","console","log"],"mappings":"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","sourcesContent":["// 3rd party library imports\nimport React, { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport * as Tone from 'tone';\nimport { Music32 } from '@carbon/icons-react';\n\n// project imports\nimport { InstrumentContainer } from './Instruments';\nimport { AppState } from './State';\nimport { DispatchAction } from './Reducer';\nimport { SideNav } from './SideNav';\nimport { VisualizerContainer } from './Visualizers';\nimport { List } from 'immutable';\n\n\n\ntype PanelProps = {\n  state: AppState;\n  dispatch: React.Dispatch<DispatchAction>;\n};\n\n/** ------------------------------------------------------------------------ **\n * Instrument and visualizer component\n ** ------------------------------------------------------------------------ */\n\nfunction InstrumentPanel({ state, dispatch }: PanelProps): JSX.Element {\n  /**\n   * This React component is the top-level for the instrument.\n   */\n  const instrument = state.get('instrument');\n\n  return (\n    <div>\n      {instrument && (\n        <InstrumentContainer\n          state={state}\n          dispatch={dispatch}\n          instrument={instrument}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction VisualizerPanel({ state }: PanelProps): JSX.Element {\n  /**\n   * This React component is the top-level for the visualizer.\n   */\n  const visualizer = state.get('visualizer');\n\n  return (\n    <div>\n      {visualizer && (\n        <VisualizerContainer key={visualizer.name} visualizer={visualizer} />\n      )}\n    </div>\n  );\n}\n\nfunction InstrumentAndVisualizer({ state, dispatch }: PanelProps): JSX.Element {\n  /**\n   * This React component bundles the instrument panel and visualizer panel together.\n   */\n\n  return (\n    <div\n      className=\"absolute right-0 bottom-0 top-0 flex flex-column\"\n      style={{ left: '16rem' }}\n    >\n      <InstrumentPanel state={state} dispatch={dispatch} />\n      <VisualizerPanel state={state} dispatch={dispatch} />\n    </div>\n  );\n}\n\nfunction ShowWelcome({ state, dispatch }: PanelProps): JSX.Element {\n  return (\n    <div\n      className=\"absolute right-0 bottom-0 top-0 flex flex-column items-center justify-center\"\n      style={{ left: '16rem' }}  >  \n      <div className=\"mw6 lh-copy mb4\">\n        <Music32 />\n        <div className=\"f3 fw7 mb2\">Welcome to the case study.</div>\n        <div className=\"f4 mb3\">\n          Select an instrument and a visualizer on the left to serve some fresh beats.\n        </div>\n        {/* <div className=\"f5\">The UI is yours to design. Express yourself.</div> */}\n      </div>\n    </div>\n  );\n}\n\nfunction ShowSongs({ state, dispatch }: PanelProps) : JSX.Element {\n\n  const oscillators: List<OscillatorType> = List([\n    'sine',\n    'sawtooth',\n    'square',\n    'triangle',\n    'fmsine',\n    'fmsawtooth',\n    'fmtriangle',\n    'amsine',\n    'amsawtooth',\n    'amtriangle',\n  ]) as List<OscillatorType>;\n\n\n  const [synth, setSynth] = useState(\n    new Tone.Synth({\n      oscillator: { type: 'amsawtooth' } as Tone.OmniOscillatorOptions,\n    }).toDestination(),\n  );\n  \n  const [search,setSearch] = useState(\"\");\n\n  const notes = state.get('notes');\n\n  const songs: List<any> = state.get('songs', List());\n  useEffect(() => {\n    if(search!==\"\")\n    {\n      dispatch(new DispatchAction('SEARCH_SONGS',{search,songs}));\n    }\n\n    if (notes && synth) {\n      let eachNote = notes.split(' ');\n      let noteObjs = eachNote.map((note: string, idx: number) => ({\n        idx,\n        time: `+${idx / 4}`,\n        note,\n        velocity: 1,\n      }));\n\n      new Tone.Part((time, value) => {\n        // the value is an object which contains both the note and the velocity\n        synth.triggerAttackRelease(value.note, '4n', time, value.velocity);\n        if (value.idx === eachNote.length - 1) {\n          dispatch(new DispatchAction('STOP_SONG'));\n        }\n      }, noteObjs).start(0);\n\n      Tone.Transport.start();\n\n      return () => {\n        Tone.Transport.cancel();\n      };\n    }\n\n    return () => {};\n  }, [notes, synth, search, songs, dispatch]);\n\n  const setOscillator = (newType: Tone.ToneOscillatorType) => {\n    setSynth(oldSynth => {\n      oldSynth.disconnect();\n\n      return new Tone.Synth({\n        oscillator: { type: newType } as Tone.OmniOscillatorOptions,\n      }).toDestination();\n    });\n  };\n\n\n  const FilteredSongs : List<any> = state.get('FilteredSongs',List());\n  return(\n    <div>\n      <input  className=\"input-reset ba b--black-20 pa2 mb2 db w-100\" placeholder=\"Enter Song Title\"  value={search} onChange={(value)=>{\n        setSearch(value.target.value);\n      }}></input>\n    <div \n    style={{\n      display: 'flex',\n      flexDirection: 'row',\n      justifyContent: 'space-between'\n    }}\n    >\n      <div style={{\n        marginTop: '5%',\n      }}>  Search Results by Song Tittle\n      {\n       FilteredSongs !== undefined ?\n       FilteredSongs.map(song=>{\n         return(\n           <div\n           className=\"f6 pointer underline items-center no-underline i dim\"\n            onClick={()=>{\n            dispatch(new DispatchAction('PLAY_SONG', { id: song.get('id') }))\n           }}>\n             {\n               song.get('songTitle')\n             }\n             </div>\n         )\n       }) : null\n\n}\n</div> \n<div style={{\n        marginTop: '5%',\n      }}>\n        Oscillators List\n        {oscillators.map(o => (\n          <div\n          className=\"f6 pointer underline items-center no-underline i dim\"\n          onClick={() => setOscillator(o)}\n          style={{\n            margin: '1%'\n          }}\n          >\n            {\n              o\n            }\n            </div>\n        ))}\n      </div>\n    </div>\n    </div>\n  )\n}\n\n/** ------------------------------------------------------------------------ **\n * Main page component\n ** ------------------------------------------------------------------------ */\n\nexport function MainPage({ state, dispatch }: PanelProps): JSX.Element {\n  /**\n   * This React component bundles together the entire main page.\n   */\n\n  const location = useLocation();\n  const isWelcome = !state.get('instrument');\n  console.log('INSTRUMENT', isWelcome);\n\n  useEffect(() => {\n    dispatch(new DispatchAction('SET_LOCATION', { location }));\n  }, [dispatch, location]);\n\n  return (\n    <div\n      className=\"fixed top-0 left-0 h-100 w-100 bg-white\"\n      onClick={() => Tone.start()}\n    >\n      <SideNav state={state} dispatch={dispatch} />\n      {isWelcome ? (\n        <ShowWelcome state={state} dispatch={dispatch}/>\n      ) : (\n        <InstrumentAndVisualizer state={state} dispatch={dispatch} />\n      )}\n    </div>\n  );\n}\n\n"]},"metadata":{},"sourceType":"module"}