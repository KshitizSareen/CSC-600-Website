{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kshitiz/final-project-tornado-main/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kshitiz/final-project-tornado-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/kshitiz/final-project-tornado-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// 3rd party library imports\nimport{useReducer,useEffect}from'react';import{BrowserRouter as Router,Switch,Route}from'react-router-dom';// project imports\nimport{MainPage}from'./MainPage';import{DispatchAction,appReducer}from'./Reducer';import{defaultState}from'./State';import{initializeSocket,send}from'./Socket';// css imports\nimport'animate.css';/** ------------------------------------------------------------------------ **\n * App component\n ** ------------------------------------------------------------------------ */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useReducer=useReducer(appReducer,defaultState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];useEffect(function(){initializeSocket(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(socket){var _yield$send,songs,_yield$send2,albums,_yield$send3,genres;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(new DispatchAction('SET_SOCKET',{socket:socket}));_context.next=3;return send(socket,'get_songs',{});case 3:_yield$send=_context.sent;songs=_yield$send.songs;dispatch(new DispatchAction('SET_SONGS',{songs:songs}));_context.next=8;return send(socket,'get_albums',{});case 8:_yield$send2=_context.sent;albums=_yield$send2.albums;dispatch(new DispatchAction('SET_ALBUMS',{albums:albums}));_context.next=13;return send(socket,'get_genres',{});case 13:_yield$send3=_context.sent;genres=_yield$send3.genres;dispatch(new DispatchAction('SET_GENRES',{genres:genres}));case 16:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),function(){dispatch(new DispatchAction('DELETE_SOCKET'));});},[]);return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",children:/*#__PURE__*/_jsx(MainPage,{state:state,dispatch:dispatch})}),/*#__PURE__*/_jsx(Route,{path:\"/:instrument\",children:/*#__PURE__*/_jsx(MainPage,{state:state,dispatch:dispatch})}),/*#__PURE__*/_jsx(Route,{path:\"*\",children:/*#__PURE__*/_jsx(\"div\",{children:\"404\"})})]})});}export default App;","map":{"version":3,"sources":["/Users/kshitiz/final-project-tornado-main/client/src/App.tsx"],"names":["useReducer","useEffect","BrowserRouter","Router","Switch","Route","MainPage","DispatchAction","appReducer","defaultState","initializeSocket","send","App","state","dispatch","socket","songs","albums","genres"],"mappings":"sYAAA;AACA,OAASA,UAAT,CAAqBC,SAArB,KAAsC,OAAtC,CACA,OAASC,aAAa,GAAIC,CAAAA,MAA1B,CAAkCC,MAAlC,CAA0CC,KAA1C,KAAuD,kBAAvD,CAEA;AACA,OAASC,QAAT,KAAyB,YAAzB,CACA,OAASC,cAAT,CAAyBC,UAAzB,KAA2C,WAA3C,CACA,OAASC,YAAT,KAA6B,SAA7B,CACA,OAASC,gBAAT,CAA2BC,IAA3B,KAAuC,UAAvC,CAIA;AACA,MAAO,aAAP,CAEA;AACA;AACA,+E,wFAEA,QAASC,CAAAA,GAAT,EAAe,CACb,gBAA0BZ,UAAU,CAACQ,UAAD,CAAaC,YAAb,CAApC,4CAAOI,KAAP,iBAAcC,QAAd,iBAEAb,SAAS,CAAC,UAAM,CACdS,gBAAgB,0FACd,iBAAMK,MAAN,gLACED,QAAQ,CAAC,GAAIP,CAAAA,cAAJ,CAAmB,YAAnB,CAAiC,CAAEQ,MAAM,CAANA,MAAF,CAAjC,CAAD,CAAR,CADF,sBAE0BJ,CAAAA,IAAI,CAACI,MAAD,CAAS,WAAT,CAAqB,EAArB,CAF9B,kCAEUC,KAFV,aAEUA,KAFV,CAGEF,QAAQ,CAAC,GAAIP,CAAAA,cAAJ,CAAmB,WAAnB,CAAgC,CAAES,KAAK,CAALA,KAAF,CAAhC,CAAD,CAAR,CAHF,sBAIyBL,CAAAA,IAAI,CAACI,MAAD,CAAQ,YAAR,CAAqB,EAArB,CAJ7B,mCAISE,MAJT,cAISA,MAJT,CAKEH,QAAQ,CAAC,GAAIP,CAAAA,cAAJ,CAAmB,YAAnB,CAAgC,CAACU,MAAM,CAANA,MAAD,CAAhC,CAAD,CAAR,CALF,uBAMyBN,CAAAA,IAAI,CAACI,MAAD,CAAQ,YAAR,CAAqB,EAArB,CAN7B,oCAMSG,MANT,cAMSA,MANT,CAOEJ,QAAQ,CAAC,GAAIP,CAAAA,cAAJ,CAAmB,YAAnB,CAAgC,CAACW,MAAM,CAANA,MAAD,CAAhC,CAAD,CAAR,CAPF,uDADc,+DAUd,UAAM,CACJJ,QAAQ,CAAC,GAAIP,CAAAA,cAAJ,CAAmB,eAAnB,CAAD,CAAR,CACD,CAZa,CAAhB,CAcD,CAfQ,CAeN,EAfM,CAAT,CAiBA,mBACE,KAAC,MAAD,wBACE,MAAC,MAAD,yBACE,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,uBACE,KAAC,QAAD,EAAU,KAAK,CAAEM,KAAjB,CAAwB,QAAQ,CAAEC,QAAlC,EADF,EADF,cAIE,KAAC,KAAD,EAAO,IAAI,CAAC,cAAZ,uBACE,KAAC,QAAD,EAAU,KAAK,CAAED,KAAjB,CAAwB,QAAQ,CAAEC,QAAlC,EADF,EAJF,cAOE,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,uBACE,4BADF,EAPF,GADF,EADF,CAeD,CAED,cAAeF,CAAAA,GAAf","sourcesContent":["// 3rd party library imports\nimport { useReducer, useEffect } from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\n\n// project imports\nimport { MainPage } from './MainPage';\nimport { DispatchAction, appReducer } from './Reducer';\nimport { defaultState } from './State';\nimport { initializeSocket, send } from './Socket';\n\n\n\n// css imports\nimport 'animate.css';\n\n/** ------------------------------------------------------------------------ **\n * App component\n ** ------------------------------------------------------------------------ */\n\nfunction App() {\n  const [state, dispatch] = useReducer(appReducer, defaultState);\n\n  useEffect(() => {\n    initializeSocket(\n      async socket => {\n        dispatch(new DispatchAction('SET_SOCKET', { socket }));\n        const { songs } = await send(socket, 'get_songs',{});\n        dispatch(new DispatchAction('SET_SONGS', { songs }));\n        const {albums} = await send(socket,'get_albums',{});\n        dispatch(new DispatchAction('SET_ALBUMS',{albums})); \n        const {genres} = await send(socket,'get_genres',{});\n        dispatch(new DispatchAction('SET_GENRES',{genres}));\n      },\n      () => {\n        dispatch(new DispatchAction('DELETE_SOCKET'));\n      },\n    );\n  }, []);\n\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/\">\n          <MainPage state={state} dispatch={dispatch} />\n        </Route>\n        <Route path=\"/:instrument\">\n          <MainPage state={state} dispatch={dispatch} />\n        </Route>\n        <Route path=\"*\">\n          <div>404</div>\n        </Route>\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}